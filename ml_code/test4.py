from kinect_quat_functions_nocv import abs2relquat, rel2absquat
import cv2
from kinect_quat_functions import quat2vector, vector2screen
import numpy as np


quat511 = [ #IA DW1 511

(0.0, 0.0, 0.0, 0.0),
(-0.04707345366477966, 0.9928267598152161, 0.0916907787322998, -0.06059674173593521),
(-0.050773657858371735, 0.981590211391449, 0.1726224720478058, -0.06406333297491074),
(-0.05271880328655243, 0.9828792810440063, 0.15587393939495087, -0.0828995332121849),
(-0.055708423256874084, 0.9811021089553833, 0.15483064949512482, -0.10179711878299713),
(0.6097254753112793, 0.7680047750473022, 0.17346587777137756, -0.09117614477872849),
(0.7949207425117493, -0.5663865208625793, -0.2174895852804184, 0.0023715635761618614),
(0.6274937391281128, 0.7045024633407593, -0.12439727038145065, -0.30733251571655273),
(0.7008910775184631, -0.6823100447654724, -0.025989053770899773, -0.20622630417346954),
(0.8269293904304504, -0.024939406663179398, 0.5411424040794373, -0.1507667601108551),
(0.8078917264938354, 0.04719074070453644, -0.29903674125671387, -0.5056294202804565),
(-0.571729838848114, 0.08838000148534775, 0.4037308394908905, 0.708742082118988),
(0.0, 0.0, 0.0, 0.0),
(0.0, 0.0, 0.0, 0.0),
(0.8546380400657654, 0.021953344345092773, -0.467999666929245, -0.22380392253398895),
(-0.3276265561580658, -0.5377433896064758, 0.776140034198761, 0.033159371465444565),
(0.3741157352924347, 0.7144322395324707, -0.588370680809021, 0.05868496000766754),
(0.0, 0.0, 0.0, 0.0),
(0.0, 0.0, 0.0, 0.0),
(-0.48251697421073914, 0.4210188090801239, -0.5229143500328064, 0.5625665783882141),
(0.7528988122940063, 0.11099760979413986, 0.6421276330947876, 0.09216790646314621),
(0.0, 0.0, 0.0, 0.0),
(-0.4309995472431183, -0.43326467275619507, 0.5260026454925537, 0.5914748311042786),
(-0.6685120463371277, 0.024979878216981888, 0.7431969046592712, 0.01122257299721241),
(0.0, 0.0, 0.0, 0.0)
]



quat513=[
(0.0, 0.0, 0.0, 0.0),
(-0.04387800768017769, 0.9947655200958252, 0.08688681572675705, -0.0310954749584198),
(-0.04288623109459877, 0.9975404739379883, 0.046860016882419586, -0.02962980419397354),
(-0.04407224804162979, 0.9946170449256897, 0.066762775182724, -0.06585804373025894),
(-0.04637445509433746, 0.9917142391204834, 0.06518466770648956, -0.10051529109477997),
(0.6270621418952942, 0.773514986038208, 0.0917050689458847, 0.007595462258905172),
(0.8201141357421875, -0.5589799880981445, -0.10433687269687653, 0.06378164887428284),
(0.6124395728111267, 0.7348405718803406, -0.15620630979537964, -0.24602171778678894),
(0.7153744101524353, -0.6856324076652527, 0.026393948122859, -0.13210199773311615),
(0.8367555141448975, -0.03281049057841301, 0.5287760496139526, -0.1384177803993225),
(0.8404739499092102, -0.043906547129154205, -0.19169734418392181, -0.5049038529396057),
(-0.6286691427230835, 0.1767820417881012, 0.2878803014755249, 0.7004628777503967),
(0.0, 0.0, 0.0, 0.0),
(0.0, 0.0, 0.0, 0.0),
(0.8534976243972778, 0.0203216765075922, -0.4736577868461609, -0.21628014743328094),
(-0.3086537718772888, -0.5434897541999817, 0.7803896069526672, 0.018541015684604645),
(0.36498725414276123, 0.7092493772506714, -0.5984891653060913, 0.07456742972135544),
(0.0, 0.0, 0.0, 0.0),
(0.0, 0.0, 0.0, 0.0),
(0.5361127853393555, -0.39340105652809143, 0.551845908164978, -0.503274142742157),
(0.505835771560669, 0.13564558327198029, 0.8510047793388367, 0.0390051044523716),
(0.0, 0.0, 0.0, 0.0),
(-0.49131977558135986, -0.40314385294914246, 0.5730542540550232, 0.5173865556716919),
(-0.6886579394340515, 0.01533786952495575, 0.7246893644332886, 0.018444916233420372),
(0.0, 0.0, 0.0, 0.0)
]

quat525=[
(0.0, 0.0, 0.0, 0.0),
(-0.04222055524587631, 0.9942851662635803, 0.08904216438531876, -0.04106021299958229),
(-0.04837411642074585, 0.99418044090271, 0.08735116571187973, -0.04043562337756157),
(-0.044732268899679184, 0.9948304891586304, 0.055364709347486496, -0.07243023067712784),
(-0.04649941995739937, 0.991967499256134, 0.05388905480504036, -0.1045663133263588),
(0.6229100227355957, 0.7729695439338684, 0.11801932007074356, -0.023931443691253662),
(0.8135734796524048, -0.562588632106781, -0.14037032425403595, 0.04345555230975151),
(0.5984005331993103, 0.7458301186561584, -0.1618732064962387, -0.24382653832435608),
(0.7279413938522339, -0.6739668250083923, 0.033593907952308655, -0.12141448259353638),
(0.8568052649497986, -0.021510187536478043, 0.4960474371910095, -0.13913658261299133),
(0.7573047280311584, -0.11729194223880768, -0.2009752094745636, -0.6101976037025452),
(0.7553948163986206, -0.1464642584323883, -0.2249411642551422, -0.597769558429718),
(0.0, 0.0, 0.0, 0.0),
(0.0, 0.0, 0.0, 0.0),
(0.8632126450538635, 0.007334726396948099, -0.4569062292575836, -0.2145850658416748),
(-0.3607051372528076, -0.5390307903289795, 0.7602488398551941, 0.03686893731355667),
(0.41097748279571533, 0.7222679853439331, -0.5526103377342224, 0.06362597644329071),
(0.0, 0.0, 0.0, 0.0),
(0.0, 0.0, 0.0, 0.0),
(0.5313795208930969, -0.3900966942310333, 0.5610924363136292, -0.5006352066993713),
(0.5754920840263367, 0.11652842164039612, 0.8081846833229065, 0.045469678938388824),
(0.0, 0.0, 0.0, 0.0),
(-0.48670095205307007, -0.40199515223503113, 0.5771912336349487, 0.5180465579032898),
(-0.6856484413146973, 0.012409467250108719, 0.7276204824447632, 0.01734018325805664),
(0.0, 0.0, 0.0, 0.0)
]

quat523=[
(0.0, 0.0, 0.0, 0.0),
(-0.043671127408742905, 0.9934070706367493, 0.09298054873943329, -0.05088963732123375),
(-0.05026879906654358, 0.988684892654419, 0.13140803575515747, -0.05203019455075264),
(-0.05385955050587654, 0.9811245799064636, 0.16993381083011627, -0.07494192570447922),
(-0.05745959281921387, 0.9793098568916321, 0.16875053942203522, -0.0957803726196289),
(0.6167751550674438, 0.7710679173469543, 0.14721272885799408, -0.05806050822138786),
(0.8042399883270264, -0.5659787058830261, -0.17996083199977875, 0.021912377327680588),
(0.6206248998641968, 0.7096885442733765, -0.11097836494445801, -0.3144051730632782),
(0.7095484137535095, -0.6687377691268921, -0.02832886390388012, -0.22029128670692444),
(0.8327422738075256, -0.026022857055068016, 0.534562349319458, -0.14179600775241852),
(0.860197901725769, -0.13729386031627655, -0.01597135327756405, -0.4908715486526489),
(0.6603731513023376, -0.31955257058143616, -0.15957535803318024, -0.6605521440505981),
(0.0, 0.0, 0.0, 0.0),
(0.0, 0.0, 0.0, 0.0),
(0.8582645654678345, 0.01002351101487875, -0.46489736437797546, -0.21714498102664948),
(-0.23671838641166687, -0.5416824817657471, 0.8056447505950928, -0.038483552634716034),
(0.31956279277801514, 0.6997244954109192, -0.6184013485908508, 0.1607637107372284),
(0.0, 0.0, 0.0, 0.0),
(0.0, 0.0, 0.0, 0.0),
(-0.4764614999294281, 0.41930121183395386, -0.5304596424102783, 0.5619461536407471),
(0.5574114918708801, 0.11609425395727158, 0.8202590346336365, 0.05467696115374565),
(0.0, 0.0, 0.0, 0.0),
(-0.43570396304130554, -0.42929166555404663, 0.5331853032112122, 0.5844519734382629),
(-0.6717790961265564, 0.018833067268133163, 0.7402865886688232, 0.01827508769929409),
(0.0, 0.0, 0.0, 0.0)
]


relative_quats = abs2relquat(quat523, [quat525]) #input: 1*25*4, 5*25*4 returns: 5*25*4

for i in range(1):
    for j in range(25):
        for k in range(4):
            relative_quats[i][j][k] = (relative_quats[i][j][k]+1)*10
print(relative_quats)

for i in range(1):
    for j in range(25):
        for k in range(4):
            relative_quats[i][j][k] = (relative_quats[i][j][k]/10)-1
# print(len(relative_quats))
# print(len(relative_quats[0]))
# print(len(relative_quats[0][0]))



abs_quats = rel2absquat(quat523, relative_quats)
quats = []
quats.append(quat523)
quats.append(abs_quats[0])

for q in quats:
	vector_array = quat2vector(q, cameraspace = False)
	canvas = np.zeros((1800, 1920, 3), np.uint8)
	canvas = vector2screen (vector_array, 50, (800,100), canvas)
	cv2.imshow("skeleton_quaternions",canvas)
	cv2.waitKey(0)
